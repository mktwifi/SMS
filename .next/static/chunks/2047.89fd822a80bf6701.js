"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2047],{38113:function(e,s,a){var r=a(57437);s.Z=e=>{let{label:s,type:a="text",register:t,name:l,defaultValue:i,error:n,hidden:d,inputProps:o}=e;return(0,r.jsxs)("div",{className:d?"hidden":"flex flex-col gap-2 w-full md:w-1/4",children:[(0,r.jsx)("label",{className:"text-xs text-gray-500",children:s}),(0,r.jsx)("input",{type:a,...t(l),className:"ring-[1.5px] ring-gray-300 p-2 rounded-md text-sm w-full",...o,defaultValue:i}),(null==n?void 0:n.message)&&(0,r.jsx)("p",{className:"text-xs text-red-400",children:n.message.toString()})]})}},82047:function(e,s,a){a.r(s);var r=a(57437),t=a(31014),l=a(39343),i=a(38113),n=a(66648),d=a(2265),o=a(80118),m=a(54887),u=a(31721),c=a(16463),g=a(95956),x=a(24061);s.default=e=>{var s,a,p;let{type:h,data:f,setOpen:b,relatedData:j}=e,{register:z,handleSubmit:v,formState:{errors:y}}=(0,l.cI)({resolver:(0,t.F)(o.Q1)}),[w,N]=(0,d.useState)(),[I,q]=(0,m.useFormState)("create"===h?u.LK:u.Gc,{success:!1,error:!1}),S=v(e=>{console.log("hello"),console.log(e),q({...e,img:null==w?void 0:w.secure_url})}),V=(0,c.useRouter)();(0,d.useEffect)(()=>{I.success&&((0,g.Am)("Student has been ".concat("create"===h?"created":"updated","!")),b(!1),V.refresh())},[I,V,h,b]);let{grades:E,classes:Z}=j;return(0,r.jsxs)("form",{className:"flex flex-col gap-8",onSubmit:S,children:[(0,r.jsx)("h1",{className:"text-xl font-semibold",children:"create"===h?"Create a new student":"Update the student"}),(0,r.jsx)("span",{className:"text-xs text-gray-400 font-medium",children:"Authentication Information"}),(0,r.jsxs)("div",{className:"flex justify-between flex-wrap gap-4",children:[(0,r.jsx)(i.Z,{label:"Username",name:"username",defaultValue:null==f?void 0:f.username,register:z,error:null==y?void 0:y.username}),(0,r.jsx)(i.Z,{label:"Email",name:"email",defaultValue:null==f?void 0:f.email,register:z,error:null==y?void 0:y.email}),(0,r.jsx)(i.Z,{label:"Password",name:"password",type:"password",defaultValue:null==f?void 0:f.password,register:z,error:null==y?void 0:y.password})]}),(0,r.jsx)("span",{className:"text-xs text-gray-400 font-medium",children:"Personal Information"}),(0,r.jsx)(x.ZF,{uploadPreset:"school",onSuccess:(e,s)=>{let{widget:a}=s;N(e.info),a.close()},children:e=>{let{open:s}=e;return(0,r.jsxs)("div",{className:"text-xs text-gray-500 flex items-center gap-2 cursor-pointer",onClick:()=>s(),children:[(0,r.jsx)(n.default,{src:"/upload.png",alt:"",width:28,height:28}),(0,r.jsx)("span",{children:"Upload a photo"})]})}}),(0,r.jsxs)("div",{className:"flex justify-between flex-wrap gap-4",children:[(0,r.jsx)(i.Z,{label:"First Name",name:"name",defaultValue:null==f?void 0:f.name,register:z,error:y.name}),(0,r.jsx)(i.Z,{label:"Last Name",name:"surname",defaultValue:null==f?void 0:f.surname,register:z,error:y.surname}),(0,r.jsx)(i.Z,{label:"Phone",name:"phone",defaultValue:null==f?void 0:f.phone,register:z,error:y.phone}),(0,r.jsx)(i.Z,{label:"Address",name:"address",defaultValue:null==f?void 0:f.address,register:z,error:y.address}),(0,r.jsx)(i.Z,{label:"Blood Type",name:"bloodType",defaultValue:null==f?void 0:f.bloodType,register:z,error:y.bloodType}),(0,r.jsx)(i.Z,{label:"Birthday",name:"birthday",defaultValue:null==f?void 0:f.birthday.toISOString().split("T")[0],register:z,error:y.birthday,type:"date"}),(0,r.jsx)(i.Z,{label:"Parent Id",name:"parentId",defaultValue:null==f?void 0:f.parentId,register:z,error:y.parentId}),f&&(0,r.jsx)(i.Z,{label:"Id",name:"id",defaultValue:null==f?void 0:f.id,register:z,error:null==y?void 0:y.id,hidden:!0}),(0,r.jsxs)("div",{className:"flex flex-col gap-2 w-full md:w-1/4",children:[(0,r.jsx)("label",{className:"text-xs text-gray-500",children:"Sex"}),(0,r.jsxs)("select",{className:"ring-[1.5px] ring-gray-300 p-2 rounded-md text-sm w-full",...z("sex"),defaultValue:null==f?void 0:f.sex,children:[(0,r.jsx)("option",{value:"MALE",children:"Male"}),(0,r.jsx)("option",{value:"FEMALE",children:"Female"})]}),(null===(s=y.sex)||void 0===s?void 0:s.message)&&(0,r.jsx)("p",{className:"text-xs text-red-400",children:y.sex.message.toString()})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-2 w-full md:w-1/4",children:[(0,r.jsx)("label",{className:"text-xs text-gray-500",children:"Grade"}),(0,r.jsx)("select",{className:"ring-[1.5px] ring-gray-300 p-2 rounded-md text-sm w-full",...z("gradeId"),defaultValue:null==f?void 0:f.gradeId,children:E.map(e=>(0,r.jsx)("option",{value:e.id,children:e.level},e.id))}),(null===(a=y.gradeId)||void 0===a?void 0:a.message)&&(0,r.jsx)("p",{className:"text-xs text-red-400",children:y.gradeId.message.toString()})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-2 w-full md:w-1/4",children:[(0,r.jsx)("label",{className:"text-xs text-gray-500",children:"Class"}),(0,r.jsx)("select",{className:"ring-[1.5px] ring-gray-300 p-2 rounded-md text-sm w-full",...z("classId"),defaultValue:null==f?void 0:f.classId,children:Z.map(e=>(0,r.jsxs)("option",{value:e.id,children:["(",e.name," -"," ",e._count.students+"/"+e.capacity," ","Capacity)"]},e.id))}),(null===(p=y.classId)||void 0===p?void 0:p.message)&&(0,r.jsx)("p",{className:"text-xs text-red-400",children:y.classId.message.toString()})]})]}),I.error&&(0,r.jsx)("span",{className:"text-red-500",children:"Something went wrong!"}),(0,r.jsx)("button",{type:"submit",className:"bg-blue-400 text-white p-2 rounded-md",children:"create"===h?"Create":"Update"})]})}},80118:function(e,s,a){a.d(s,{Q1:function(){return n},Qu:function(){return d},UQ:function(){return l},iQ:function(){return i},qJ:function(){return t}});var r=a(59772);let t=r.z.object({id:r.z.coerce.number().optional(),name:r.z.string().min(1,{message:"Subject name is required!"}),teachers:r.z.array(r.z.string())}),l=r.z.object({id:r.z.coerce.number().optional(),name:r.z.string().min(1,{message:"Subject name is required!"}),capacity:r.z.coerce.number().min(1,{message:"Capacity name is required!"}),gradeId:r.z.coerce.number().min(1,{message:"Grade name is required!"}),supervisorId:r.z.coerce.string().optional()}),i=r.z.object({id:r.z.string().optional(),username:r.z.string().min(3,{message:"Username must be at least 3 characters long!"}).max(20,{message:"Username must be at most 20 characters long!"}),password:r.z.string().min(8,{message:"Password must be at least 8 characters long!"}).optional().or(r.z.literal("")),name:r.z.string().min(1,{message:"First name is required!"}),surname:r.z.string().min(1,{message:"Last name is required!"}),email:r.z.string().email({message:"Invalid email address!"}).optional().or(r.z.literal("")),phone:r.z.string().optional(),address:r.z.string(),img:r.z.string().optional(),bloodType:r.z.string().min(1,{message:"Blood Type is required!"}),birthday:r.z.coerce.date({message:"Birthday is required!"}),sex:r.z.enum(["MALE","FEMALE"],{message:"Sex is required!"}),subjects:r.z.array(r.z.string()).optional()}),n=r.z.object({id:r.z.string().optional(),username:r.z.string().min(3,{message:"Username must be at least 3 characters long!"}).max(20,{message:"Username must be at most 20 characters long!"}),password:r.z.string().min(8,{message:"Password must be at least 8 characters long!"}).optional().or(r.z.literal("")),name:r.z.string().min(1,{message:"First name is required!"}),surname:r.z.string().min(1,{message:"Last name is required!"}),email:r.z.string().email({message:"Invalid email address!"}).optional().or(r.z.literal("")),phone:r.z.string().optional(),address:r.z.string(),img:r.z.string().optional(),bloodType:r.z.string().min(1,{message:"Blood Type is required!"}),birthday:r.z.coerce.date({message:"Birthday is required!"}),sex:r.z.enum(["MALE","FEMALE"],{message:"Sex is required!"}),gradeId:r.z.coerce.number().min(1,{message:"Grade is required!"}),classId:r.z.coerce.number().min(1,{message:"Class is required!"}),parentId:r.z.string().min(1,{message:"Parent Id is required!"})}),d=r.z.object({id:r.z.coerce.number().optional(),title:r.z.string().min(1,{message:"Title name is required!"}),startTime:r.z.coerce.date({message:"Start time is required!"}),endTime:r.z.coerce.date({message:"End time is required!"}),lessonId:r.z.coerce.number({message:"Lesson is required!"})})}}]);