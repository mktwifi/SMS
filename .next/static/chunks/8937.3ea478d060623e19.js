"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8937],{38113:function(e,s,r){var a=r(57437);s.Z=e=>{let{label:s,type:r="text",register:t,name:i,defaultValue:n,error:l,hidden:m,inputProps:d}=e;return(0,a.jsxs)("div",{className:m?"hidden":"flex flex-col gap-2 w-full md:w-1/4",children:[(0,a.jsx)("label",{className:"text-xs text-gray-500",children:s}),(0,a.jsx)("input",{type:r,...t(i),className:"ring-[1.5px] ring-gray-300 p-2 rounded-md text-sm w-full",...d,defaultValue:n}),(null==l?void 0:l.message)&&(0,a.jsx)("p",{className:"text-xs text-red-400",children:l.message.toString()})]})}},98937:function(e,s,r){r.r(s);var a=r(57437),t=r(31014),i=r(39343),n=r(38113),l=r(80118),m=r(31721),d=r(54887),o=r(2265),c=r(95956),u=r(16463);s.default=e=>{var s;let{type:r,data:g,setOpen:z,relatedData:p}=e,{register:x,handleSubmit:b,formState:{errors:h}}=(0,i.cI)({resolver:(0,t.F)(l.qJ)}),[f,j]=(0,d.useFormState)("create"===r?m.I5:m.jZ,{success:!1,error:!1}),q=b(e=>{console.log(e),j(e)}),v=(0,u.useRouter)();(0,o.useEffect)(()=>{f.success&&((0,c.Am)("Subject has been ".concat("create"===r?"created":"updated","!")),z(!1),v.refresh())},[f,v,r,z]);let{teachers:w}=p;return(0,a.jsxs)("form",{className:"flex flex-col gap-8",onSubmit:q,children:[(0,a.jsx)("h1",{className:"text-xl font-semibold",children:"create"===r?"Create a new subject":"Update the subject"}),(0,a.jsxs)("div",{className:"flex justify-between flex-wrap gap-4",children:[(0,a.jsx)(n.Z,{label:"Subject name",name:"name",defaultValue:null==g?void 0:g.name,register:x,error:null==h?void 0:h.name}),g&&(0,a.jsx)(n.Z,{label:"Id",name:"id",defaultValue:null==g?void 0:g.id,register:x,error:null==h?void 0:h.id,hidden:!0}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 w-full md:w-1/4",children:[(0,a.jsx)("label",{className:"text-xs text-gray-500",children:"Teachers"}),(0,a.jsx)("select",{multiple:!0,className:"ring-[1.5px] ring-gray-300 p-2 rounded-md text-sm w-full",...x("teachers"),defaultValue:null==g?void 0:g.teachers,children:w.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name+" "+e.surname},e.id))}),(null===(s=h.teachers)||void 0===s?void 0:s.message)&&(0,a.jsx)("p",{className:"text-xs text-red-400",children:h.teachers.message.toString()})]})]}),f.error&&(0,a.jsx)("span",{className:"text-red-500",children:"Something went wrong!"}),(0,a.jsx)("button",{className:"bg-blue-400 text-white p-2 rounded-md",children:"create"===r?"Create":"Update"})]})}},80118:function(e,s,r){r.d(s,{Q1:function(){return l},Qu:function(){return m},UQ:function(){return i},iQ:function(){return n},qJ:function(){return t}});var a=r(59772);let t=a.z.object({id:a.z.coerce.number().optional(),name:a.z.string().min(1,{message:"Subject name is required!"}),teachers:a.z.array(a.z.string())}),i=a.z.object({id:a.z.coerce.number().optional(),name:a.z.string().min(1,{message:"Subject name is required!"}),capacity:a.z.coerce.number().min(1,{message:"Capacity name is required!"}),gradeId:a.z.coerce.number().min(1,{message:"Grade name is required!"}),supervisorId:a.z.coerce.string().optional()}),n=a.z.object({id:a.z.string().optional(),username:a.z.string().min(3,{message:"Username must be at least 3 characters long!"}).max(20,{message:"Username must be at most 20 characters long!"}),password:a.z.string().min(8,{message:"Password must be at least 8 characters long!"}).optional().or(a.z.literal("")),name:a.z.string().min(1,{message:"First name is required!"}),surname:a.z.string().min(1,{message:"Last name is required!"}),email:a.z.string().email({message:"Invalid email address!"}).optional().or(a.z.literal("")),phone:a.z.string().optional(),address:a.z.string(),img:a.z.string().optional(),bloodType:a.z.string().min(1,{message:"Blood Type is required!"}),birthday:a.z.coerce.date({message:"Birthday is required!"}),sex:a.z.enum(["MALE","FEMALE"],{message:"Sex is required!"}),subjects:a.z.array(a.z.string()).optional()}),l=a.z.object({id:a.z.string().optional(),username:a.z.string().min(3,{message:"Username must be at least 3 characters long!"}).max(20,{message:"Username must be at most 20 characters long!"}),password:a.z.string().min(8,{message:"Password must be at least 8 characters long!"}).optional().or(a.z.literal("")),name:a.z.string().min(1,{message:"First name is required!"}),surname:a.z.string().min(1,{message:"Last name is required!"}),email:a.z.string().email({message:"Invalid email address!"}).optional().or(a.z.literal("")),phone:a.z.string().optional(),address:a.z.string(),img:a.z.string().optional(),bloodType:a.z.string().min(1,{message:"Blood Type is required!"}),birthday:a.z.coerce.date({message:"Birthday is required!"}),sex:a.z.enum(["MALE","FEMALE"],{message:"Sex is required!"}),gradeId:a.z.coerce.number().min(1,{message:"Grade is required!"}),classId:a.z.coerce.number().min(1,{message:"Class is required!"}),parentId:a.z.string().min(1,{message:"Parent Id is required!"})}),m=a.z.object({id:a.z.coerce.number().optional(),title:a.z.string().min(1,{message:"Title name is required!"}),startTime:a.z.coerce.date({message:"Start time is required!"}),endTime:a.z.coerce.date({message:"End time is required!"}),lessonId:a.z.coerce.number({message:"Lesson is required!"})})}}]);