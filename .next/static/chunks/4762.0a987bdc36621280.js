"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4762],{38113:function(e,s,a){var r=a(57437);s.Z=e=>{let{label:s,type:a="text",register:t,name:i,defaultValue:l,error:n,hidden:d,inputProps:o}=e;return(0,r.jsxs)("div",{className:d?"hidden":"flex flex-col gap-2 w-full md:w-1/4",children:[(0,r.jsx)("label",{className:"text-xs text-gray-500",children:s}),(0,r.jsx)("input",{type:a,...t(i),className:"ring-[1.5px] ring-gray-300 p-2 rounded-md text-sm w-full",...o,defaultValue:l}),(null==n?void 0:n.message)&&(0,r.jsx)("p",{className:"text-xs text-red-400",children:n.message.toString()})]})}},74762:function(e,s,a){a.r(s);var r=a(57437),t=a(31014),i=a(39343),l=a(38113),n=a(66648),d=a(2265),o=a(80118),m=a(54887),u=a(31721),c=a(16463),g=a(95956),x=a(24061);s.default=e=>{var s,a;let{type:p,data:h,setOpen:b,relatedData:f}=e,{register:j,handleSubmit:z,formState:{errors:v}}=(0,i.cI)({resolver:(0,t.F)(o.iQ)}),[y,w]=(0,d.useState)(),[N,q]=(0,m.useFormState)("create"===p?u.Y7:u.Jn,{success:!1,error:!1}),S=z(e=>{console.log(e),q({...e,img:null==y?void 0:y.secure_url})}),E=(0,c.useRouter)();(0,d.useEffect)(()=>{N.success&&((0,g.Am)("Teacher has been ".concat("create"===p?"created":"updated","!")),b(!1),E.refresh())},[N,E,p,b]);let{subjects:I}=f;return(0,r.jsxs)("form",{className:"flex flex-col gap-8",onSubmit:S,children:[(0,r.jsx)("h1",{className:"text-xl font-semibold",children:"create"===p?"Create a new teacher":"Update the teacher"}),(0,r.jsx)("span",{className:"text-xs text-gray-400 font-medium",children:"Authentication Information"}),(0,r.jsxs)("div",{className:"flex justify-between flex-wrap gap-4",children:[(0,r.jsx)(l.Z,{label:"Username",name:"username",defaultValue:null==h?void 0:h.username,register:j,error:null==v?void 0:v.username}),(0,r.jsx)(l.Z,{label:"Email",name:"email",defaultValue:null==h?void 0:h.email,register:j,error:null==v?void 0:v.email}),(0,r.jsx)(l.Z,{label:"Password",name:"password",type:"password",defaultValue:null==h?void 0:h.password,register:j,error:null==v?void 0:v.password})]}),(0,r.jsx)("span",{className:"text-xs text-gray-400 font-medium",children:"Personal Information"}),(0,r.jsxs)("div",{className:"flex justify-between flex-wrap gap-4",children:[(0,r.jsx)(l.Z,{label:"First Name",name:"name",defaultValue:null==h?void 0:h.name,register:j,error:v.name}),(0,r.jsx)(l.Z,{label:"Last Name",name:"surname",defaultValue:null==h?void 0:h.surname,register:j,error:v.surname}),(0,r.jsx)(l.Z,{label:"Phone",name:"phone",defaultValue:null==h?void 0:h.phone,register:j,error:v.phone}),(0,r.jsx)(l.Z,{label:"Address",name:"address",defaultValue:null==h?void 0:h.address,register:j,error:v.address}),(0,r.jsx)(l.Z,{label:"Blood Type",name:"bloodType",defaultValue:null==h?void 0:h.bloodType,register:j,error:v.bloodType}),(0,r.jsx)(l.Z,{label:"Birthday",name:"birthday",defaultValue:null==h?void 0:h.birthday.toISOString().split("T")[0],register:j,error:v.birthday,type:"date"}),h&&(0,r.jsx)(l.Z,{label:"Id",name:"id",defaultValue:null==h?void 0:h.id,register:j,error:null==v?void 0:v.id,hidden:!0}),(0,r.jsxs)("div",{className:"flex flex-col gap-2 w-full md:w-1/4",children:[(0,r.jsx)("label",{className:"text-xs text-gray-500",children:"Sex"}),(0,r.jsxs)("select",{className:"ring-[1.5px] ring-gray-300 p-2 rounded-md text-sm w-full",...j("sex"),defaultValue:null==h?void 0:h.sex,children:[(0,r.jsx)("option",{value:"MALE",children:"Male"}),(0,r.jsx)("option",{value:"FEMALE",children:"Female"})]}),(null===(s=v.sex)||void 0===s?void 0:s.message)&&(0,r.jsx)("p",{className:"text-xs text-red-400",children:v.sex.message.toString()})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-2 w-full md:w-1/4",children:[(0,r.jsx)("label",{className:"text-xs text-gray-500",children:"Subjects"}),(0,r.jsx)("select",{multiple:!0,className:"ring-[1.5px] ring-gray-300 p-2 rounded-md text-sm w-full",...j("subjects"),defaultValue:null==h?void 0:h.subjects,children:I.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))}),(null===(a=v.subjects)||void 0===a?void 0:a.message)&&(0,r.jsx)("p",{className:"text-xs text-red-400",children:v.subjects.message.toString()})]}),(0,r.jsx)(x.ZF,{uploadPreset:"school",onSuccess:(e,s)=>{let{widget:a}=s;w(e.info),a.close()},children:e=>{let{open:s}=e;return(0,r.jsxs)("div",{className:"text-xs text-gray-500 flex items-center gap-2 cursor-pointer",onClick:()=>s(),children:[(0,r.jsx)(n.default,{src:"/upload.png",alt:"",width:28,height:28}),(0,r.jsx)("span",{children:"Upload a photo"})]})}})]}),N.error&&(0,r.jsx)("span",{className:"text-red-500",children:"Something went wrong!"}),(0,r.jsx)("button",{className:"bg-blue-400 text-white p-2 rounded-md",children:"create"===p?"Create":"Update"})]})}},80118:function(e,s,a){a.d(s,{Q1:function(){return n},Qu:function(){return d},UQ:function(){return i},iQ:function(){return l},qJ:function(){return t}});var r=a(59772);let t=r.z.object({id:r.z.coerce.number().optional(),name:r.z.string().min(1,{message:"Subject name is required!"}),teachers:r.z.array(r.z.string())}),i=r.z.object({id:r.z.coerce.number().optional(),name:r.z.string().min(1,{message:"Subject name is required!"}),capacity:r.z.coerce.number().min(1,{message:"Capacity name is required!"}),gradeId:r.z.coerce.number().min(1,{message:"Grade name is required!"}),supervisorId:r.z.coerce.string().optional()}),l=r.z.object({id:r.z.string().optional(),username:r.z.string().min(3,{message:"Username must be at least 3 characters long!"}).max(20,{message:"Username must be at most 20 characters long!"}),password:r.z.string().min(8,{message:"Password must be at least 8 characters long!"}).optional().or(r.z.literal("")),name:r.z.string().min(1,{message:"First name is required!"}),surname:r.z.string().min(1,{message:"Last name is required!"}),email:r.z.string().email({message:"Invalid email address!"}).optional().or(r.z.literal("")),phone:r.z.string().optional(),address:r.z.string(),img:r.z.string().optional(),bloodType:r.z.string().min(1,{message:"Blood Type is required!"}),birthday:r.z.coerce.date({message:"Birthday is required!"}),sex:r.z.enum(["MALE","FEMALE"],{message:"Sex is required!"}),subjects:r.z.array(r.z.string()).optional()}),n=r.z.object({id:r.z.string().optional(),username:r.z.string().min(3,{message:"Username must be at least 3 characters long!"}).max(20,{message:"Username must be at most 20 characters long!"}),password:r.z.string().min(8,{message:"Password must be at least 8 characters long!"}).optional().or(r.z.literal("")),name:r.z.string().min(1,{message:"First name is required!"}),surname:r.z.string().min(1,{message:"Last name is required!"}),email:r.z.string().email({message:"Invalid email address!"}).optional().or(r.z.literal("")),phone:r.z.string().optional(),address:r.z.string(),img:r.z.string().optional(),bloodType:r.z.string().min(1,{message:"Blood Type is required!"}),birthday:r.z.coerce.date({message:"Birthday is required!"}),sex:r.z.enum(["MALE","FEMALE"],{message:"Sex is required!"}),gradeId:r.z.coerce.number().min(1,{message:"Grade is required!"}),classId:r.z.coerce.number().min(1,{message:"Class is required!"}),parentId:r.z.string().min(1,{message:"Parent Id is required!"})}),d=r.z.object({id:r.z.coerce.number().optional(),title:r.z.string().min(1,{message:"Title name is required!"}),startTime:r.z.coerce.date({message:"Start time is required!"}),endTime:r.z.coerce.date({message:"End time is required!"}),lessonId:r.z.coerce.number({message:"Lesson is required!"})})}}]);