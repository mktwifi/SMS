"use strict";exports.id=558,exports.ids=[558],exports.modules={76224:(e,s,a)=>{a.d(s,{Z:()=>t});var r=a(10326);let t=({label:e,type:s="text",register:a,name:t,defaultValue:l,error:i,hidden:n,inputProps:d})=>(0,r.jsxs)("div",{className:n?"hidden":"flex flex-col gap-2 w-full md:w-1/4",children:[r.jsx("label",{className:"text-xs text-gray-500",children:e}),r.jsx("input",{type:s,...a(t),className:"ring-[1.5px] ring-gray-300 p-2 rounded-md text-sm w-full",...d,defaultValue:l}),i?.message&&r.jsx("p",{className:"text-xs text-red-400",children:i.message.toString()})]})},85558:(e,s,a)=>{a.r(s),a.d(s,{default:()=>p});var r=a(10326),t=a(74064),l=a(74723),i=a(76224),n=a(46226),d=a(17577),m=a(8570),o=a(60962),c=a(3682),u=a(35047),g=a(31190),x=a(3870);let p=({type:e,data:s,setOpen:a,relatedData:p})=>{let{register:h,handleSubmit:b,formState:{errors:f}}=(0,l.cI)({resolver:(0,t.F)(m.Q1)}),[j,z]=(0,d.useState)(),[y,w]=(0,o.useFormState)("create"===e?c.LK:c.Gc,{success:!1,error:!1}),N=b(e=>{console.log("hello"),console.log(e),w({...e,img:j?.secure_url})}),I=(0,u.useRouter)();(0,d.useEffect)(()=>{y.success&&((0,g.Am)(`Student has been ${"create"===e?"created":"updated"}!`),a(!1),I.refresh())},[y,I,e,a]);let{grades:q,classes:v}=p;return(0,r.jsxs)("form",{className:"flex flex-col gap-8",onSubmit:N,children:[r.jsx("h1",{className:"text-xl font-semibold",children:"create"===e?"Create a new student":"Update the student"}),r.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"Authentication Information"}),(0,r.jsxs)("div",{className:"flex justify-between flex-wrap gap-4",children:[r.jsx(i.Z,{label:"Username",name:"username",defaultValue:s?.username,register:h,error:f?.username}),r.jsx(i.Z,{label:"Email",name:"email",defaultValue:s?.email,register:h,error:f?.email}),r.jsx(i.Z,{label:"Password",name:"password",type:"password",defaultValue:s?.password,register:h,error:f?.password})]}),r.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"Personal Information"}),r.jsx(x.ZF,{uploadPreset:"school",onSuccess:(e,{widget:s})=>{z(e.info),s.close()},children:({open:e})=>(0,r.jsxs)("div",{className:"text-xs text-gray-500 flex items-center gap-2 cursor-pointer",onClick:()=>e(),children:[r.jsx(n.default,{src:"/upload.png",alt:"",width:28,height:28}),r.jsx("span",{children:"Upload a photo"})]})}),(0,r.jsxs)("div",{className:"flex justify-between flex-wrap gap-4",children:[r.jsx(i.Z,{label:"First Name",name:"name",defaultValue:s?.name,register:h,error:f.name}),r.jsx(i.Z,{label:"Last Name",name:"surname",defaultValue:s?.surname,register:h,error:f.surname}),r.jsx(i.Z,{label:"Phone",name:"phone",defaultValue:s?.phone,register:h,error:f.phone}),r.jsx(i.Z,{label:"Address",name:"address",defaultValue:s?.address,register:h,error:f.address}),r.jsx(i.Z,{label:"Blood Type",name:"bloodType",defaultValue:s?.bloodType,register:h,error:f.bloodType}),r.jsx(i.Z,{label:"Birthday",name:"birthday",defaultValue:s?.birthday.toISOString().split("T")[0],register:h,error:f.birthday,type:"date"}),r.jsx(i.Z,{label:"Parent Id",name:"parentId",defaultValue:s?.parentId,register:h,error:f.parentId}),s&&r.jsx(i.Z,{label:"Id",name:"id",defaultValue:s?.id,register:h,error:f?.id,hidden:!0}),(0,r.jsxs)("div",{className:"flex flex-col gap-2 w-full md:w-1/4",children:[r.jsx("label",{className:"text-xs text-gray-500",children:"Sex"}),(0,r.jsxs)("select",{className:"ring-[1.5px] ring-gray-300 p-2 rounded-md text-sm w-full",...h("sex"),defaultValue:s?.sex,children:[r.jsx("option",{value:"MALE",children:"Male"}),r.jsx("option",{value:"FEMALE",children:"Female"})]}),f.sex?.message&&r.jsx("p",{className:"text-xs text-red-400",children:f.sex.message.toString()})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-2 w-full md:w-1/4",children:[r.jsx("label",{className:"text-xs text-gray-500",children:"Grade"}),r.jsx("select",{className:"ring-[1.5px] ring-gray-300 p-2 rounded-md text-sm w-full",...h("gradeId"),defaultValue:s?.gradeId,children:q.map(e=>r.jsx("option",{value:e.id,children:e.level},e.id))}),f.gradeId?.message&&r.jsx("p",{className:"text-xs text-red-400",children:f.gradeId.message.toString()})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-2 w-full md:w-1/4",children:[r.jsx("label",{className:"text-xs text-gray-500",children:"Class"}),r.jsx("select",{className:"ring-[1.5px] ring-gray-300 p-2 rounded-md text-sm w-full",...h("classId"),defaultValue:s?.classId,children:v.map(e=>(0,r.jsxs)("option",{value:e.id,children:["(",e.name," -"," ",e._count.students+"/"+e.capacity," ","Capacity)"]},e.id))}),f.classId?.message&&r.jsx("p",{className:"text-xs text-red-400",children:f.classId.message.toString()})]})]}),y.error&&r.jsx("span",{className:"text-red-500",children:"Something went wrong!"}),r.jsx("button",{type:"submit",className:"bg-blue-400 text-white p-2 rounded-md",children:"create"===e?"Create":"Update"})]})}},8570:(e,s,a)=>{a.d(s,{Q1:()=>n,Qu:()=>d,UQ:()=>l,iQ:()=>i,qJ:()=>t});var r=a(27256);let t=r.z.object({id:r.z.coerce.number().optional(),name:r.z.string().min(1,{message:"Subject name is required!"}),teachers:r.z.array(r.z.string())}),l=r.z.object({id:r.z.coerce.number().optional(),name:r.z.string().min(1,{message:"Subject name is required!"}),capacity:r.z.coerce.number().min(1,{message:"Capacity name is required!"}),gradeId:r.z.coerce.number().min(1,{message:"Grade name is required!"}),supervisorId:r.z.coerce.string().optional()}),i=r.z.object({id:r.z.string().optional(),username:r.z.string().min(3,{message:"Username must be at least 3 characters long!"}).max(20,{message:"Username must be at most 20 characters long!"}),password:r.z.string().min(8,{message:"Password must be at least 8 characters long!"}).optional().or(r.z.literal("")),name:r.z.string().min(1,{message:"First name is required!"}),surname:r.z.string().min(1,{message:"Last name is required!"}),email:r.z.string().email({message:"Invalid email address!"}).optional().or(r.z.literal("")),phone:r.z.string().optional(),address:r.z.string(),img:r.z.string().optional(),bloodType:r.z.string().min(1,{message:"Blood Type is required!"}),birthday:r.z.coerce.date({message:"Birthday is required!"}),sex:r.z.enum(["MALE","FEMALE"],{message:"Sex is required!"}),subjects:r.z.array(r.z.string()).optional()}),n=r.z.object({id:r.z.string().optional(),username:r.z.string().min(3,{message:"Username must be at least 3 characters long!"}).max(20,{message:"Username must be at most 20 characters long!"}),password:r.z.string().min(8,{message:"Password must be at least 8 characters long!"}).optional().or(r.z.literal("")),name:r.z.string().min(1,{message:"First name is required!"}),surname:r.z.string().min(1,{message:"Last name is required!"}),email:r.z.string().email({message:"Invalid email address!"}).optional().or(r.z.literal("")),phone:r.z.string().optional(),address:r.z.string(),img:r.z.string().optional(),bloodType:r.z.string().min(1,{message:"Blood Type is required!"}),birthday:r.z.coerce.date({message:"Birthday is required!"}),sex:r.z.enum(["MALE","FEMALE"],{message:"Sex is required!"}),gradeId:r.z.coerce.number().min(1,{message:"Grade is required!"}),classId:r.z.coerce.number().min(1,{message:"Class is required!"}),parentId:r.z.string().min(1,{message:"Parent Id is required!"})}),d=r.z.object({id:r.z.coerce.number().optional(),title:r.z.string().min(1,{message:"Title name is required!"}),startTime:r.z.coerce.date({message:"Start time is required!"}),endTime:r.z.coerce.date({message:"End time is required!"}),lessonId:r.z.coerce.number({message:"Lesson is required!"})})}};